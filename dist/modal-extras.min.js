this.Zaneray=this.Zaneray||{},this.Zaneray.bootstrap=this.Zaneray.bootstrap||{},this.Zaneray.bootstrap.modal=function(e,a){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a;const t='<div id="dynamic-modal" class="modal fade"><div class="modal-dialog"><div class="modal-btn-close btn-close" data-dismiss="modal"></div><div id="modal-content" class="modal-content"></div></div></div>';function o(e,o){let s=n();s||(document.body.insertAdjacentHTML("afterbegin",t),s=n()),e&&(s.querySelector(".modal-content").innerHTML=e.outerHTML),o&&o.split(" ").forEach(e=>{e&&e.length&&s.classList.add(e)}),a(s).modal().on("hidden.bs.modal",function(){n().remove()}),document.removeEventListener("click.modal")}function n(){return document.getElementById("dynamic-modal")}function s(){return n().querySelector(".modal-content")}return e.onLoad=function(){document.body.addEventListener("click",e=>{if((e=e||window.event).target!==e.currentTarget){if(!e.target.hasAttribute("data-toggle"))return;const t=String(e.target.dataset.toggle.replace(/-/g,"")).toLowerCase();switch(console.log(t),t){case"modalhtml":e.preventDefault(),function(e){let a="";const t=e.dataset.id,n=e.dataset.class||"",s=document.getElementById(t);s&&((a=s.cloneNode(!0)).id=a.id+"-modal"),o(a,n)}(e.target),e.stopPropagation();break;case"modalajax":e.preventDefault(),function(e){let a=e.href;const t=e.dataset.class||"",r=e.dataset.id,i=e.dataset.unwrap||!1;o("","modal-ajax modal-loading "+t),fetch(a).then(e=>{if(!e.ok)throw Error(e.statusText);return e.text()}).then(e=>{let t=e;if(void 0!==r){const o=new DOMParser,n=o.parseFromString(e,"text/html");try{t=i?n.querySelector(r).innerHTML:n.querySelector(r).outerHTML}catch(e){t=`id='${r}' was not found in the response from ${a}`}}s().innerHTML=t,n().classList.remove("modal-loading")}).catch(e=>{console.log(e),alert("there was an error loading the URL"),n().remove()})}(e.target),e.stopPropagation();break;case"modalvideo":e.preventDefault(),function(e){const a=e.dataset.class||"",t=e.dataset.source,n=e.dataset.key;let s,r;switch(t.toLowerCase()){case"vimeo":r=`https://player.vimeo.com/video/${n}?autoplay=1&title=0&byline=0&portrait=0`;break;case"youtube":r=`https://www.youtube.com/embed/${n}?rel=0&amp;showinfo=0&autoplay=1`;break;default:alert(`The video source '${n}' is not valid (must be vimeo or youtube)`)}s=`<div class="modal-video-wrapper"><iframe src="${r}" class="modal-video-iframe" width="720" height="405" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`;const i=document.createElement("div");i.innerHTML=s,o(i.firstChild,"modal-video "+a)}(e.target),e.stopPropagation();break;case"modalimage":e.preventDefault(),function(e){a(e);const t=e.dataset.class||"";let r;const i=new Image;if(i.title=e.title||"",i.id="modal-image",i.classList.add("modal-image"),i.addEventListener("load",function(){n().classList.remove("modal-loading")},!1),i.src=e.href,void 0!==e.dataset.link?((r=document.createElement("a")).href=e.dataset.link,r.classList.add("modal-image-link"),r.target="_blank",r.appendChild(i)):r=i,o(r,"modal-image-wrapper modal-loading "+t),void 0!==e.dataset.instagram){const a=`<div class='modal-image-instagram-container'><div class='user-section'><img src='${e.dataset.userphoto}' class='instagram-userphoto' /><div class='user-info'><span class='username'>${e.dataset.username}</span><span class='location'>${e.dataset.location}</span></div><a href=${e.dataset.link} class='btn btn-sm btn-instagram' target='_blank'>Follow</a></div><span class='image-likes'>${e.dataset.likes}</span><span class='image-caption'>${e.dataset.caption}</span></div>`;s().insertAdjacentHTML("beforeend",a)}else if(void 0!==e.dataset.caption){const a=`<div class='modal-image-caption-wrapper'><span class='modal-image-caption'>${e.dataset.caption}</span></div>`;s().insertAdjacentHTML("beforeend",a)}if(void 0!==e.dataset.gallery){const t=e.dataset.gallery,o=document.querySelectorAll(`[data-gallery='${t}']`),n=o.length-1,r=[],i=[],l=[];e.href,o.forEach(e=>{r.push(e.href),i.push(e.dataset.caption),l.push(e.dataset.link)}),s().insertAdjacentHTML("beforeend","<span class='global-arrow prev-arrow'></span><span class='global-arrow next-arrow'></span>");const d=function(e){const a=s().querySelector(".modal-image");let t=a.src,o=r.indexOf(t),d=0;switch(e){case"next":(d=o+1)>n&&(d=0);default:(d=o-1)<0&&(d=n)}const c=r[d],m=i[d],p=l[d];!function(e){const a=s().querySelector(".modal-image-caption-wrapper");if(void 0!==e)if(a)a.text=e;else{const a=`<div class='modal-image-caption-wrapper'><span class='modal-image-caption'>${e}</span></div>`;s().insertAdjacentHTML("beforeend",a)}else a&&a.remove()}(m),function(e){const a=s().querySelector(".modal-image-link");if(void 0!==e)if(a)a.href=e;else{const a=s().querySelector(".modal-image"),t=document.createElement("a");t.href=e,t.classList.add("modal-image-link"),t.target="_blank",a.parentNode.insertBefore(t,a),t.appendChild(a)}else if(a){const e=a.firstChild;a.replaceWith(e)}}(p),a.src=c};document.body.addEventListener("click",e=>{e.target!==e.currentTarget&&(e.target.classList.contains("next-arrow")?d("next"):e.target.classList.contains("prev-arrow")&&d("prev"))});try{a(".modal-content").swipe({swipeLeft:function(){d("next")},swipeRight:function(){d("prev")}})}catch(e){console.error(e)}}}(e.target),e.stopPropagation();break;default:console.log(`${t} not a valid modal-extras data-toggle, skipping`)}}}),document.addEventListener("keyup",e=>{e=e||window.event;var a=!1;a="key"in e?"Escape"==e.key||"Esc"==e.key:27==e.keyCode;const t=n();a&&t&&!t.hidden&&t.querySelector(".modal-btn-close").click()})},e.generateModalTemplate=o,e}({},$);
