this.Zaneray=this.Zaneray||{},this.Zaneray.bootstrap=this.Zaneray.bootstrap||{},this.Zaneray.bootstrap.modal=function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;const a='<div id="dynamic-modal" class="modal fade"><div class="modal-dialog"><div class="modal-btn-close btn-close" data-dismiss="modal"></div><div id="modal-content" class="modal-content"></div></div></div>';function o(e,o){let d=n();d||(document.body.insertAdjacentHTML("afterbegin",a),d=n()),e&&(d.querySelector(".modal-content").innerHTML=e.outerHTML),o&&o.split(" ").forEach(e=>{e&&e.length&&d.classList.add(e)}),t(d).modal().on("hidden.bs.modal",function(){n().remove()})}function n(){return document.getElementById("dynamic-modal")}return e.onLoad=function(){document.body.addEventListener("click",e=>{if((e=e||window.event).target!==e.currentTarget){if(!e.target.hasAttribute("data-toggle"))return;const a=String(e.target.dataset.toggle.replace(/-/g,"")).toLowerCase();switch(console.log(a),a){case"modalhtml":e.preventDefault(),function(e){let t="";const a=e.dataset.id,n=e.dataset.class||"",d=document.getElementById(a);d&&((t=d.cloneNode(!0)).id=t.id+"-modal"),o(t,n)}(e.target),e.stopPropagation();break;case"modalajax":e.preventDefault(),function(e){let t=e.href;const a=e.dataset.class||"",d=e.dataset.id,r=e.dataset.unwrap||!1;o("","modal-ajax modal-loading "+a),fetch(t).then(e=>{if(!e.ok)throw Error(e.statusText);return e.text()}).then(e=>{let a=e;if(void 0!==d){const o=new DOMParser,n=o.parseFromString(e,"text/html");try{a=r?n.querySelector(d).innerHTML:n.querySelector(d).outerHTML}catch(e){a=`id='${d}' was not found in the response from ${t}`}}n().querySelector(".modal-content").innerHTML=a,n().classList.remove("modal-loading")}).catch(e=>{console.log(e),alert("there was an error loading the URL"),n().remove()})}(e.target),e.stopPropagation();break;case"modalvideo":e.preventDefault(),function(e){const t=e.dataset.class||"",a=e.dataset.source,n=e.dataset.key;let d,r;switch(a.toLowerCase()){case"vimeo":r=`https://player.vimeo.com/video/${n}?autoplay=1&title=0&byline=0&portrait=0`;break;case"youtube":r=`https://www.youtube.com/embed/${n}?rel=0&amp;showinfo=0&autoplay=1`;break;default:alert(`The video source '${n}' is not valid (must be vimeo or youtube)`)}d=`<div class="modal-video-wrapper"><iframe src="${r}" class="modal-video-iframe" width="720" height="405" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`;const l=document.createElement("div");l.innerHTML=d,o(l.firstChild,"modal-video "+t)}(e.target),e.stopPropagation();break;case"modalimage":e.preventDefault(),function(e){t(e);const a=e.dataset.class||"",d=new Image;d.title=e.title||"",d.id="modal-image",d.classList.add("modal-image"),d.addEventListener("load",function(){n().classList.remove("modal-loading")},!1),d.src=e.href,o(d,"modal-image-wrapper modal-loading "+a)}(e.target),e.stopPropagation();break;default:console.log(`${a} not a valid modal-extras data-toggle, skipping`)}}}),document.addEventListener("keyup",e=>{e=e||window.event;var t=!1;t="key"in e?"Escape"==e.key||"Esc"==e.key:27==e.keyCode;const a=n();t&&a&&!a.hidden&&a.querySelector(".modal-btn-close").click()})},e.generateModalTemplate=o,e}({},$);
